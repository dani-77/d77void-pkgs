# Template file for 'chadwm'
pkgname=chadwm
version=6.5
revision=1
#archs="i686 x86_64"
#build_wrksrc=
build_style=gnu-makefile
#configure_args=""
#make_build_args=""
#make_install_args=""
#conf_files=""
#make_dirs="/var/log/dir 0755 root root"
hostmakedepends="fontconfig-devel freetype-devel imlib2-devel libX11-devel libXft-devel libXinerama-devel libXrender-devel pkg-config"
makedepends="fontconfig-devel freetype-devel imlib2-devel libX11-devel libXft-devel libXinerama-devel libXrender-devel pkg-config"
depends="fontconfig freetype imlib2 libX11 libXft libXinerama libXrender"
short_desc="Embellished DWM v6.5"
maintainer="Daniel Azevedo <daniazevedo77@posteo.net>"
license="GPL-3.0-or-later"
homepage="https://github.com/dani-77/chadwm"
#changelog=""
distfiles="https://github.com/dani-77/${pkgname}/archive/refs/tags/${version}.tar.gz"
checksum=8dfbf68f48e8ff1091641c437dcdeb01cafd6ae3572a9adfa11a927bec45a973

do_build() {
	cp ${FILESDIR}/xbps Makefile
	[ -e ${FILESDIR}/config.h ] && cp ${FILESDIR}/config.h config.h
	vsed -e "/CFLAGS/s|\${CPPFLAGS}|& $CFLAGS|g" -i config.mk
	make CC=$CC INCS="-I. -I${XBPS_CROSS_BASE}/usr/include/freetype2" LIBS="-lImlib2 -lX11 -lXinerama -lXft -lXrender -lfontconfig"
}

do_install() {
        make PREFIX=/usr DESTDIR=$DESTDIR install
        vinstall ${FILESDIR}/chadwm.desktop 644 usr/share/xsessions
	vmkdir opt/chadwm
        vcopy ${FILESDIR}/scripts opt/chadwm
        vlicense LICENSE
}
