# Template file for 'librewolf-bin'
pkgname=librewolf-bin
_pkgname=${pkgname%-bin}
version=146.0
revision=1
_pkgrel=1
archs="x86_64 i686"
build_style="fetch"
short_desc="Firefox fork focused on privacy, security and freedom (precompiled)"
maintainer="Daniel Azevedo <daniazevedo77@posteo.net>"
license="MPL-2.0"
homepage="https://codeberg.org/librewolf"
distfiles="https://gitlab.com/api/v4/projects/44042130/packages/generic/librewolf/146.0-2/librewolf-146.0-2-linux-x86_64-deb.deb"
conflicts="librewolf"
repository=d77
checksum=75bfe0453aea54277743e4863d6dd20ea9edf9e88afc5c3d640b7a5a129932b3

do_install() {
	vextract -C ${DESTDIR} librewolf-146.0-2-linux-x86_64-deb.deb
	# xbps-src doesn't allow ELF files in /usr/share
	mv ${DESTDIR}/usr/share/${_pkgname} ${DESTDIR}/usr/lib
	# recreate symlink
	ln -frs ${DESTDIR}/usr/lib/${_pkgname}/${_pkgname} ${DESTDIR}/usr/bin
	# correct path in launcher
	vsed -i 's|usr/share|usr/lib|g' ${DESTDIR}/usr/share/applications/${_pkgname}.desktop
}
