# Template file for 'yubioath-flutter'
pkgname=yubioath-flutter
version=7.3.0
revision=2
#archs="i686 x86_64"
#build_wrksrc=
build_style="fetch"
#configure_args=""
#make_build_args=""
#make_install_args=""
#conf_files=""
#make_dirs="/var/log/dir 0755 root root"
hostmakedepends="tar"
#makedepends=""
depends="libpcsclite libyubikey-devel libyubikey-utils pam_yubico pcsc-ccid pcsc-tools pcsclite yubico-piv-tool yubikey-manager"
short_desc="Yubico Authenticator for Desktop"
maintainer="Daniel Azevedo <daniazevedo77@posteo.net>"
license="GPL-3.0-or-later"
homepage="https://developers.yubico.com/yubioath-flutter/"
changelog="https://github.com/Yubico/${pkgname}/releases/tag/${version}"
distfiles="https://developers.yubico.com/${pkgname}/Releases/yubico-authenticator-latest-linux.tar.gz"
checksum=a82aa86a60f16d2d6bb07789f33d3256e12b7d2f231a0d6625dea1706c4069e1
nopie=yes
repository=d77

do_build() {
	vextract yubico-authenticator-latest-linux.tar.gz
	sed -i 's|@EXEC_PATH/authenticator|/opt/yubioath-flutter/authenticator|' linux_support/com.yubico.yubioath.desktop
	sed -i 's|@EXEC_PATH/linux_support/com.yubico.yubioath.png|/opt/yubioath-flutter/linux_support/com.yubico.yubioath.png|' linux_support/com.yubico.yubioath.desktop
	vmkdir /usr/share/applications
	vcopy linux_support/com.yubico.yubioath.desktop /usr/share/applications/
}	

do_install() {
	rm yubico-authenticator-latest-linux.tar.gz
	vmkdir /opt/yubioath-flutter
	vcopy '*' /opt/yubioath-flutter/
}
